{"mappings":"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","sources":["packages/feature/lib/audioFeature.ts","packages/feature/lib/videoFeature.ts","packages/feature/lib/feature.ts"],"sourcesContent":["import { Asserts, CssFlagsClass } from '@detector-js/core';\n\n/**\n *\n *\n * @export\n * @class AudioFeature\n * @extends {CssFlagsClass}\n */\nexport class AudioFeature extends CssFlagsClass {\n  #audioElement: HTMLAudioElement;\n\n  context: boolean;\n\n  formats: {\n    mp3: boolean;\n    webm: boolean;\n    ogg: boolean;\n    opus: boolean;\n    wav: boolean;\n    m4a: boolean;\n  };\n\n  /**\n   * Creates an instance of AudioFeature.\n   * @param {any} [ua=null]\n   * @param {any} [flags={}]\n   * @param {string} [cssFlagsPrefix='audio']\n   *\n   * @memberOf AudioFeature\n   */\n  constructor(ua: string | null = null, flags = {}, cssFlagsPrefix = 'audio') {\n    super(ua, flags, cssFlagsPrefix);\n\n    this.#createTestElements();\n\n    this.context = this.getContext();\n\n    this.formats = {\n      mp3: this.getMp3(),\n      webm: this.getWebm(),\n      ogg: this.getOgg(),\n      opus: this.getOpus(),\n      wav: this.getWav(),\n      m4a: this.getM4a()\n    };\n  }\n\n  /**\n   *\n   *\n   * @memberof AudioFeature\n   */\n  #createTestElements() {\n    this.#audioElement = this.document.createElement('audio');\n  }\n\n  // /**\n  //  *\n  //  *\n  //  * @memberof AudioFeature\n  //  */\n  // _destroyTestElements() {\n  //   this.#audioElement = null;\n\n  //   delete this.#audioElement;\n  // }\n\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf AudioFeature\n   */\n  get supported() {\n    return Asserts.all(\n      [\n        'Audio' in this.root,\n        'HTMLAudioElement' in this.root,\n        'HTMLMediaElement' in this.root,\n        () =>\n          !!this.#audioElement &&\n          'canPlayType' in this.#audioElement &&\n          this.#audioElement instanceof HTMLAudioElement &&\n          this.#audioElement instanceof HTMLMediaElement\n      ],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf AudioFeature\n   */\n  getContext() {\n    return Asserts.one(['AudioContext' in this.root, 'webkitAudioContext' in this.root]);\n  }\n\n  /**\n   *__\n   *\n   * @returns boolean\n   *\n   * @memberOf AudioFeature\n   */\n  getMp3() {\n    return Asserts.all(\n      [() => this.supported && this.#audioElement.canPlayType('audio/mpeg;').replace(/^no$/, '') !== ''],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf AudioFeature\n   */\n  getWebm() {\n    return Asserts.all(\n      [\n        () => this.supported && this.#audioElement.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/, '') !== ''\n      ],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf AudioFeature\n   */\n  getOgg() {\n    return Asserts.all(\n      [() => this.supported && this.#audioElement.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/, '') !== ''],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf AudioFeature\n   */\n  getOpus() {\n    return Asserts.all(\n      [() => this.supported && this.#audioElement.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/, '') !== ''],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf AudioFeature\n   */\n  getWav() {\n    return Asserts.all(\n      [() => this.supported && this.#audioElement.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/, '') !== ''],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf AudioFeature\n   */\n  getM4a() {\n    return Asserts.all(\n      [\n        () =>\n          this.supported &&\n          (this.#audioElement.canPlayType('audio/x-m4a;').replace(/^no$/, '') ||\n            this.#audioElement.canPlayType('audio/aac;').replace(/^no$/, '')) !== ''\n      ],\n      true\n    );\n  }\n}\n","import { Asserts, CssFlagsClass } from '@detector-js/core';\n\n/**\n *\n *\n * @export\n * @class VideoFeature\n * @extends {CssFlagsClass}\n */\nexport class VideoFeature extends CssFlagsClass {\n  #videoElement: HTMLVideoElement;\n\n  formats: {\n    mp4: boolean;\n    ogv: boolean;\n    webm: boolean;\n  };\n\n  /**\n   * Creates an instance of VideoFeature.\n   * @param {any} [ua=null]\n   * @param {any} [flags={}]\n   * @param {string} [cssFlagsPrefix='video']\n   *\n   * @memberOf VideoFeature\n   */\n  constructor(ua: string|null = null, flags = {}, cssFlagsPrefix = 'video') {\n    super(ua, flags, cssFlagsPrefix);\n\n    this._createTestElements();\n\n    this.formats = {\n      mp4: this.getMp4(),\n      ogv: this.getOgv(),\n      webm: this.getWebm()\n    };\n  }\n\n  /**\n   *\n   *\n   * @memberof VideoFeature\n   */\n  _createTestElements() {\n    this.#videoElement = this.document.createElement('video');\n  }\n\n  // /**\n  //  *\n  //  *\n  //  * @memberof VideoFeature\n  //  */\n  // _destroyTestElements() {\n  //   this._viewElement = null;\n\n  //   delete this._videoElement;\n  // }\n\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf VideoFeature\n   */\n  get supported() {\n    return Asserts.all(\n      [\n        'HTMLVideoElement' in this.root,\n        'HTMLMediaElement' in this.root,\n        () =>\n          !!this.#videoElement &&\n          'canPlayType' in this.#videoElement &&\n          this.#videoElement instanceof HTMLVideoElement &&\n          this.#videoElement instanceof HTMLMediaElement\n      ],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf VideoFeature\n   */\n  getMp4() {\n    return Asserts.all(\n      [\n        () =>\n          this.supported &&\n          this.#videoElement.canPlayType('video/mp4; codecs=\"avc1.42E01E, mp4a.40.2\"').replace(/^no$/, '') !== ''\n      ],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf VideoFeature\n   */\n  getOgv() {\n    return Asserts.all(\n      [\n        () =>\n          this.supported &&\n          this.#videoElement.canPlayType('video/ogg; codecs=\"theora, vorbis\"').replace(/^no$/, '') !== ''\n      ],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf VideoFeature\n   */\n  getWebm() {\n    return Asserts.all(\n      [\n        () =>\n          this.supported &&\n          this.#videoElement.canPlayType('video/webm; codecs=\"vp8, vorbis\"').replace(/^no$/, '') !== ''\n      ],\n      true\n    );\n  }\n}\n","import { Asserts, CssFlagsClass } from '@detector-js/core';\n\n/**\n *\n *\n * @export\n * @class Feature\n * @extends {CssFlagsClass}\n */\nexport class Feature extends CssFlagsClass {\n  #cssPrefixes: string[];\n  #script: HTMLScriptElement;\n  #canvas: HTMLCanvasElement;\n  #div: HTMLDivElement;\n  #input: HTMLInputElement;\n  #img: HTMLImageElement;\n  #xmlHttpRequest: XMLHttpRequest;\n\n  addEventListener: boolean;\n  asyncScript: boolean;\n  battery: boolean;\n  cors: boolean;\n  deferScript: boolean;\n  file: boolean;\n  fileSystem: boolean;\n  fullscreen: boolean;\n  fullscreenKeyboard: boolean;\n  geolocation: boolean;\n  historyAPI: boolean;\n  littleEndian: boolean;\n  localStorage: boolean;\n  matchMedia: boolean;\n  querySelector: boolean;\n  querySelectorAll: boolean;\n  serviceWorker: boolean;\n  typedArray: boolean;\n  userMedia: boolean;\n  vibration: boolean;\n  worker: boolean;\n\n  /**\n   * Creates an instance of Feature.\n   * @param {any} [ua=null]\n   * @param {any} [flags={}]\n   * @param {string} [cssFlagsPrefix='feature']\n   *\n   * @memberOf Feature\n   */\n  constructor(ua: string | null = null, flags = {}, cssFlagsPrefix = 'feature') {\n    super(ua, flags, cssFlagsPrefix);\n\n    this.#createTestElements();\n\n    this.addEventListener = this.getAddEventListener();\n    this.asyncScript = this.getAsyncScript();\n    this.battery = this.getBattery();\n    this.cors = this.getCors();\n    this.deferScript = this.getDeferScript();\n    this.file = this.getFile();\n    this.fileSystem = this.getFileSystem();\n    this.fullscreen = this.getFullscreen();\n    this.fullscreenKeyboard = this.getFullscreenKeyboard();\n    this.geolocation = this.getGeolocation();\n    this.historyAPI = this.getHistoryAPI();\n    this.littleEndian = this.getLittleEndian();\n    this.localStorage = this.getLocalStorage();\n    this.matchMedia = this.getMatchMedia();\n    this.querySelector = this.getQuerySelector();\n    this.querySelectorAll = this.getQuerySelectorAll();\n    this.serviceWorker = this.getServiceWorker();\n    this.typedArray = this.getTypedArray();\n    this.userMedia = this.getUserMedia();\n    this.vibration = this.getVibration();\n    this.worker = this.getWorker();\n  }\n\n  /**\n   *\n   *\n   * @param {any} prop\n   * @param {any} [prefixes=this.#cssPrefixes]\n   * @returns {string}\n   *\n   * @memberOf Feature\n   */\n  #getCssPrefixedProp(prop, prefixes = this.#cssPrefixes) {\n    prop = prop.toCamelCase();\n\n    const prefixedProps = prefixes.map((item) => {\n      return (item === 'spec' ? '' : '-' + item + '-') + prop;\n    });\n\n    // if ('CSS' in this.root && 'supports' in this.root.CSS) {\n    //   return this.root.CSS.supports(prefixedProps.map(item => '(' + item + ': inherit)').join(' or '));\n    // }\n\n    const prefixedPropsFound = prefixedProps.filter((item) => {\n      return item in this.#div.style;\n    });\n\n    if (prefixedPropsFound.length > 0) {\n      return prefixedPropsFound[0];\n    }\n\n    return null;\n  }\n\n  /**\n   *\n   *\n   * @param {any} prop\n   * @param {any} [prefixes=this.#cssPrefixes]\n   * @returns {string}\n   *\n   * @memberOf Feature\n   */\n  _checkCssPrefixedProp(prop, prefixes = this.#cssPrefixes) {\n    return !!this.#getCssPrefixedProp(prop, prefixes);\n  }\n\n  /**\n   *\n   *\n   * @param {any} prop\n   * @param {any} value\n   * @returns {any}\n   *\n   * @memberOf Feature\n   */\n  _getCssPrefixedPropValue(prop, value) {\n    const prefixedProp = this.#getCssPrefixedProp(prop);\n\n    if (prefixedProp) {\n      this.document.body.insertBefore(this.#div, null);\n\n      this.#div.style[prefixedProp] = value;\n\n      const computedStylePropValue = this.root.getComputedStyle(this.#div).getPropertyValue(prefixedProp);\n\n      this.document.body.removeChild(this.#div);\n\n      if (!!computedStylePropValue && typeof computedStylePropValue === 'string') {\n        return computedStylePropValue;\n      }\n\n      return null;\n    }\n\n    return null;\n  }\n\n  /**\n   *\n   *\n   * @param {any} prop\n   * @param {any} value\n   * @returns {any}\n   *\n   * @memberOf Feature\n   */\n  _checkCssPrefixedPropValue(prop, value) {\n    const prefixedPropValue = this._getCssPrefixedPropValue(prop, value);\n\n    return !!prefixedPropValue && prefixedPropValue !== 'none';\n  }\n\n  /**\n   *\n   *\n   * @memberof Feature\n   */\n  #createTestElements() {\n    this.#cssPrefixes = ['spec', 'webkit', 'moz', 'ms', 'o'];\n\n    this.#script = this.document.createElement('script');\n    this.#canvas = this.document.createElement('canvas');\n    this.#div = this.document.createElement('div');\n    this.#input = this.document.createElement('input');\n    this.#img = this.document.createElement('img');\n    this.#xmlHttpRequest = new this.root.XMLHttpRequest();\n  }\n\n  // /**\n  //  *\n  //  *\n  //  * @memberof Feature\n  //  */\n  // _destroyTestElements() {\n  //   this.#cssPrefixes = null;\n\n  //   this._script = null;\n  //   this._canvas = null;\n  //   this._div = null;\n  //   this._input = null;\n  //   this._img = null;\n  //   this._xmlHttpRequest = null;\n\n  //   delete this.#cssPrefixes;\n\n  //   delete this._script;\n  //   delete this._canvas;\n  //   delete this._div;\n  //   delete this._input;\n  //   delete this._img;\n  //   delete this._xmlHttpRequest;\n  // }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getAddEventListener() {\n    return 'addEventListener' in this.root;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getAsyncScript() {\n    return 'async' in this.#script;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getBattery() {\n    return 'battery' in this.navigator;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getCors() {\n    return 'XMLHttpRequest' in this.root && 'withCredentials' in this.#xmlHttpRequest;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getDeferScript() {\n    return 'defer' in this.#script;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getFile() {\n    return Asserts.all(['File' in this.root, 'FileReader' in this.root, 'FileList' in this.root, 'Blob' in this.root]);\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getFileSystem() {\n    return 'requestFileSystem' in this.root;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getFullscreen() {\n    return Asserts.one([\n      'requestFullscreen' in this.#canvas,\n      'webkitRequestFullscreen' in this.#canvas,\n      'msRequestFullscreen' in this.#canvas,\n      'mozRequestFullScreen' in this.#canvas\n    ]);\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getFullscreenKeyboard() {\n    return Asserts.all([() => 'Element' in this.root && 'ALLOW_KEYBOARD_INPUT' in this.root.Element], true);\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getGeolocation() {\n    return 'geolocation' in this.navigator;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getHistoryAPI() {\n    return Asserts.all([() => 'history' in this.root && 'pushState' in this.root.history], true);\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getLittleEndian() {\n    return Asserts.all(\n      [this.getTypedArray, () => new this.root.Int8Array(new this.root.Int16Array([1]).buffer)[0] > 0],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getLocalStorage() {\n    return (\n      Asserts.one([() => 'localStorage' in this.root], true) &&\n      Asserts.one(\n        [\n          () => {\n            const test = 'x';\n            this.root.localStorage.setItem(test, test);\n            this.root.localStorage.removeItem(test);\n\n            return true;\n          }\n        ],\n        true\n      )\n    );\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getMatchMedia() {\n    return 'matchMedia' in this.root;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getQuerySelector() {\n    return 'querySelector' in this.document;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getQuerySelectorAll() {\n    return 'querySelectorAll' in this.document;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getServiceWorker() {\n    return 'serviceWorker' in this.navigator;\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getTypedArray() {\n    return Asserts.all([() => 'Int8Array' in this.root && typeof this.root.Int8Array !== 'undefined'], true);\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getUserMedia() {\n    return Asserts.one([\n      'getUserMedia' in this.navigator,\n      'webkitGetUserMedia' in this.navigator,\n      'mozGetUserMedia' in this.navigator,\n      'msGetUserMedia' in this.navigator\n    ]);\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getVibration() {\n    return Asserts.one([\n      'vibrate' in this.navigator,\n      'webkitVibrate' in this.navigator,\n      'mozVibrate' in this.navigator,\n      'msVibrate' in this.navigator\n    ]);\n  }\n\n  /**\n   *\n   *\n   * @returns boolean\n   *\n   * @memberOf Feature\n   */\n  getWorker() {\n    return 'Worker' in this.root;\n  }\n\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get pointerEnabled() {\n    return Asserts.one(['pointerEnabled' in this.navigator, 'msPointerEnabled' in this.navigator]);\n  }\n\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get pixelRatio() {\n    return this.root.devicePixelRatio || 1;\n  }\n\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get pointerLock() {\n    return Asserts.one([\n      'pointerLockElement' in this.document,\n      'webkitPointerLockElement' in this.document,\n      'mozPointerLockElement' in this.document\n    ]);\n  }\n\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get quirksMode() {\n    return this.document.compatMode !== 'CSS1Compat';\n  }\n\n  /**\n   * Test if CSS 3D transforms are supported\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get css3D() {\n    return Asserts.all(\n      [\n        this._checkCssPrefixedPropValue.bind(this, 'transform', 'translate3d(1px,1px,1px)'),\n        this._checkCssPrefixedProp.bind(this, 'perspective')\n      ],\n      true\n    );\n  }\n\n  // Test if CSS transforms are supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get cssTransform() {\n    return Asserts.one([this._checkCssPrefixedProp.bind(this, 'transform-origin')], true);\n  }\n\n  // Test if CSS transitions are supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get cssTransition() {\n    return Asserts.one([this._checkCssPrefixedProp.bind(this, 'transition')], true);\n  }\n\n  // Test if Device Motion is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get deviceMotion() {\n    return 'DeviceMotionEvent' in this.root;\n  }\n\n  // Test if Device Orientation is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get deviceOrientation() {\n    return 'DeviceOrientationEvent' in this.root;\n  }\n\n  // Test if Context Menu is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get contextMenu() {\n    return Asserts.all(['contextMenu' in this.document, 'HTMLMenuItemElement' in this.root]);\n  }\n\n  // Test if classList API is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get classList() {\n    return 'classList' in this.document;\n  }\n\n  // Test if placeholder attribute is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get placeholder() {\n    return 'placeholder' in this.#input;\n  }\n\n  // Test if viewport units are supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get viewportUnit() {\n    return Asserts.all([() => (this.#img.style.width = '1vw') && this.#img.style.width !== ''], true);\n  }\n\n  // Test if REM units are supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get remUnit() {\n    return Asserts.all([() => (this.#img.style.width = '1rem') && this.#img.style.width !== ''], true);\n  }\n\n  // Test if Canvas is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get canvas() {\n    return Asserts.all([() => 'getContext' in this.#canvas && !!this.#canvas.getContext('2d')], true);\n  }\n\n  // Test if SVG is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get svg() {\n    return Asserts.all(\n      [\n        () =>\n          'createElementNS' in this.document &&\n          'createSVGRect' in this.document.createElementNS('http://www.w3.org/2000/svg', 'svg')\n      ],\n      true\n    );\n  }\n\n  // Test if WebP is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get webp() {\n    return Asserts.all(\n      [\n        () => {\n          const elem = document.createElement('canvas');\n\n          if (!!(elem.getContext && elem.getContext('2d'))) {\n            // was able or not to get WebP representation\n            return elem.toDataURL('image/webp').indexOf('data:image/webp') === 0;\n          }\n\n          return false;\n        }\n      ],\n      true\n    );\n  }\n\n  // Test if WebGL is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get webGL() {\n    return Asserts.one(\n      [\n        () =>\n          this.canvas &&\n          'WebGLRenderingContext' in this.root &&\n          (this.#canvas.getContext('webgl') || this.#canvas.getContext('experimental-webgl')),\n        () => this.canvas && 'WebGL2RenderingContext' in this.root && this.#canvas.getContext('webgl2')\n      ],\n      true\n    );\n  }\n\n  // Test if WebVR is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get webVR() {\n    return Asserts.all(['getVRDisplays' in this.navigator]);\n  }\n\n  // Tests if touch events are supported, but doesn't necessarily reflect a touchscreen device\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get touch() {\n    return (\n      Asserts.one([() => 'ontouchstart' in this.root, () => 'ontouchstart' in this.document.documentElement], true) &&\n      Asserts.one(\n        [\n          () => 'DocumentTouch' in this.root,\n          () => this.pointerEnabled && 'MSGesture' in this.root,\n          () => 'maxTouchPoints' in this.navigator && this.navigator.maxTouchPoints > 1\n        ],\n        true\n      )\n    );\n  }\n\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get forceTouch() {\n    return Asserts.all(\n      [\n        () =>\n          'MouseEvent' in this.root &&\n          'WEBKIT_FORCE_AT_MOUSE_DOWN' in this.root.MouseEvent &&\n          'WEBKIT_FORCE_AT_FORCE_MOUSE_DOWN' in this.root.MouseEvent\n      ],\n      true\n    );\n  }\n\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get pointerEvents() {\n    return Asserts.all([this.root.PointerEvent], true);\n  }\n\n  // Test if img srcset attribute is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get srcset() {\n    return 'srcset' in this.#img;\n  }\n\n  // Test if img sizes attribute is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get sizes() {\n    return 'sizes' in this.#img;\n  }\n\n  // Test if Picture element is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get pictureElement() {\n    return 'HTMLPictureElement' in this.root;\n  }\n\n  // Test if Picture element is supported\n  /**\n   *\n   *\n   * @readonly\n   *\n   * @memberOf Feature\n   */\n  get dialogElement() {\n    return 'HTMLDialogElement' in this.root;\n  }\n}\n\nif (process.env.NODE_ENV === 'development') {\n  const packageJSON = require('../package.json');\n\n  console.log(`${packageJSON.description} v${packageJSON.version} initialized`);\n}\n\nexport * from './audioFeature';\nexport * from './videoFeature';\n"],"names":["$25212e03751e368a$export$ae7d97a50b8bcedb","$38mAg$detectorjscore","CssFlagsClass","audioElement","constructor","ua","flags","cssFlagsPrefix","super","this","createTestElements","context","getContext","formats","mp3","getMp3","webm","getWebm","ogg","getOgg","opus","getOpus","wav","getWav","m4a","getM4a","document","createElement","supported","Asserts","all","root","HTMLAudioElement","HTMLMediaElement","one","canPlayType","replace","$4ef66138e3df28eb$export$4d7d44add0424e8a","videoElement","_createTestElements","mp4","getMp4","ogv","getOgv","HTMLVideoElement","$f3d0a5c7a52ae77f$export$6e91cf7616333d5","cssPrefixes","script","canvas","div","input","img","xmlHttpRequest","addEventListener","getAddEventListener","asyncScript","getAsyncScript","battery","getBattery","cors","getCors","deferScript","getDeferScript","file","getFile","fileSystem","getFileSystem","fullscreen","getFullscreen","fullscreenKeyboard","getFullscreenKeyboard","geolocation","getGeolocation","historyAPI","getHistoryAPI","littleEndian","getLittleEndian","localStorage","getLocalStorage","matchMedia","getMatchMedia","querySelector","getQuerySelector","querySelectorAll","getQuerySelectorAll","serviceWorker","getServiceWorker","typedArray","getTypedArray","userMedia","getUserMedia","vibration","getVibration","worker","getWorker","getCssPrefixedProp","prop","prefixes","toCamelCase","prefixedPropsFound","map","item","filter","style","length","_checkCssPrefixedProp","_getCssPrefixedPropValue","value","prefixedProp","body","insertBefore","computedStylePropValue","getComputedStyle","getPropertyValue","removeChild","_checkCssPrefixedPropValue","prefixedPropValue","XMLHttpRequest","navigator","Element","history","Int8Array","Int16Array","buffer","setItem","removeItem","pointerEnabled","pixelRatio","devicePixelRatio","pointerLock","quirksMode","compatMode","css3D","bind","cssTransform","cssTransition","deviceMotion","deviceOrientation","contextMenu","classList","placeholder","viewportUnit","width","remUnit","svg","createElementNS","webp","elem","toDataURL","indexOf","webGL","webVR","touch","documentElement","maxTouchPoints","forceTouch","MouseEvent","pointerEvents","PointerEvent","srcset","sizes","pictureElement","dialogElement"],"version":3,"file":"feature.js.map"}