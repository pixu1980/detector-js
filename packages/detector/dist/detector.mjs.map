{"mappings":"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","sources":["packages/detector/lib/detector.ts"],"sourcesContent":["/*jshint expr: true */\nimport { FlagsClass } from '@detector-js/core';\n\n//! Features\nimport { Feature, AudioFeature, VideoFeature } from '@detector-js/feature';\n\n//! Hardware\nimport { Platform, Device, CPU, GPU } from '@detector-js/hardware';\n\n//! Software\nimport { Browser, Engine, OS } from '@detector-js/software';\n\n/**\n *\n *\n * @export\n * @class Detector\n * @extends {FlagsClass}\n */\nexport class Detector extends FlagsClass {\n  #values: boolean;\n  #cssFlags: string[] | null;\n  #cssFlagsPrefix: string;\n\n  feature: any;\n  browser: {};\n  engine: any;\n  os: {};\n  device: any;\n  cpu: {};\n  gpu: any;\n  platform: string;\n\n  /**\n   * Creates an instance of Detector.\n   * @param {boolean} [cssFlags=false]\n   * @param {string} [cssFlagsPrefix='djs']\n   * @param {any} [ua=null]\n   *\n   * @memberOf Detector\n   */\n  constructor(ua: string | null = null, values = true, cssFlags = false, cssFlagsPrefix = 'djs') {\n    super(ua);\n\n    this.#values = values;\n    this.#cssFlags = !!cssFlags ? [] : null;\n    this.#cssFlagsPrefix = cssFlagsPrefix + (!!cssFlagsPrefix ? '--' : '');\n\n    //! Features\n    this.checkFeature();\n\n    //! Software\n    this.checkEngine();\n    this.checkBrowser();\n    this.checkOS();\n\n    //! Hardware\n    // this.checkDevice();\n    this.checkCPU();\n    this.checkGPU();\n    this.checkPlatform();\n\n    this.setCssFlags();\n\n    // remove unnecessary memory usage\n    // delete this.booleanFlagsValuePropertyName;\n    // delete this._values;\n    // delete this._cssFlags;\n    // delete this._cssFlagsPrefix;\n    // delete this.root;\n    // delete this.process;\n    // delete this.navigator;\n    // delete this.document;\n    // delete this.ua;\n\n    // console.warn('DetectorJS initialized', this.toFlags());\n  }\n\n  //! Feature\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkFeature() {\n    const feature = new Feature(this.ua);\n    const audio = new AudioFeature(this.ua);\n    const video = new VideoFeature(this.ua);\n\n    this.feature = feature.toFlags().merge({\n      audio: audio.toFlags(),\n      video: video.toFlags()\n    });\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(feature.toCssFlags(), audio.toCssFlags(), video.toCssFlags());\n    }\n  }\n\n  //! Software\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkEngine() {\n    const engine = new Engine(this.ua, this.toFlags());\n\n    if (this.#values) {\n      this.engine = engine.toValues();\n    } else {\n      this.engine = engine.toFlags();\n    }\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(engine.toCssFlags());\n    }\n  }\n\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkBrowser() {\n    const browser = new Browser(this.ua, this.toFlags());\n\n    if (this.#values) {\n      this.browser = browser.toValues();\n    } else {\n      this.browser = browser.toFlags();\n    }\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(browser.toCssFlags());\n    }\n  }\n\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkOS() {\n    const os = new OS(this.ua, this.toFlags());\n\n    if (this.#values) {\n      this.os = os.toValues();\n    } else {\n      this.os = os.toFlags();\n    }\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(os.toCssFlags());\n    }\n  }\n\n  //! Hardware\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkDevice() {\n    const device = new Device(this.ua, this.toFlags());\n\n    this.device = device.toFlags();\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(device.toCssFlags());\n    }\n  }\n\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkCPU() {\n    const cpu = new CPU(this.ua, this.toFlags());\n\n    if (this.#values) {\n      this.cpu = cpu.toValues();\n    } else {\n      this.cpu = cpu.toFlags();\n    }\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(cpu.toCssFlags());\n    }\n  }\n\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkGPU() {\n    const gpu = new GPU(this.ua, this.toFlags());\n\n    this.gpu = gpu.toFlags();\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(gpu.toCssFlags());\n    }\n  }\n\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkPlatform() {\n    const platform = new Platform(this.ua, this.toFlags());\n\n    if (this.#values) {\n      this.platform = platform.toValues();\n    } else {\n      this.platform = platform.toFlags();\n    }\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(platform.toCssFlags());\n    }\n  }\n\n  //! CSS Flags\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  setCssFlags() {\n    if (!!this.#cssFlags) {\n      const cssFlagsPrefixed = this.#cssFlags.map((cssFlag) => {\n        return this.#cssFlagsPrefix + cssFlag;\n      });\n\n      const htmlElement = document.documentElement || document.querySelector('html');\n\n      cssFlagsPrefixed.forEach((cssFlag) => {\n        return htmlElement.className.replace(cssFlag, '');\n      });\n\n      htmlElement.className += cssFlagsPrefixed.join(' ').trim();\n    }\n  }\n}\n\nif (process.env.NODE_ENV === 'development') {\n  const packageJSON = require('../package.json');\n\n  console.log(`${packageJSON.description} v${packageJSON.version} initialized`);\n}\n"],"names":[],"version":3,"file":"detector.mjs.map"}