{"mappings":"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","sources":["packages/detector/lib/detector.ts"],"sourcesContent":["/*jshint expr: true */\nimport { FlagsClass } from '@detector-js/core';\n\n//! Features\nimport { Feature, AudioFeature, VideoFeature } from '@detector-js/feature';\n\n//! Hardware\nimport { Platform, Device, CPU, GPU } from '@detector-js/hardware';\n\n//! Software\nimport { Browser, Engine, OS } from '@detector-js/software';\n\n/**\n *\n *\n * @export\n * @class Detector\n * @extends {FlagsClass}\n */\nexport class Detector extends FlagsClass {\n  #values: boolean;\n  #cssFlags: string[] | null;\n  #cssFlagsPrefix: string;\n\n  feature: any;\n  browser: {};\n  engine: any;\n  os: {};\n  device: any;\n  cpu: {};\n  gpu: any;\n  platform: string;\n\n  /**\n   * Creates an instance of Detector.\n   * @param {boolean} [cssFlags=false]\n   * @param {string} [cssFlagsPrefix='djs']\n   * @param {any} [ua=null]\n   *\n   * @memberOf Detector\n   */\n  constructor(ua: string | null = null, values = true, cssFlags = false, cssFlagsPrefix = 'djs') {\n    super(ua);\n\n    this.#values = values;\n    this.#cssFlags = !!cssFlags ? [] : null;\n    this.#cssFlagsPrefix = cssFlagsPrefix + (!!cssFlagsPrefix ? '--' : '');\n\n    //! Features\n    this.checkFeature();\n\n    //! Software\n    this.checkEngine();\n    this.checkBrowser();\n    this.checkOS();\n\n    //! Hardware\n    // this.checkDevice();\n    this.checkCPU();\n    this.checkGPU();\n    this.checkPlatform();\n\n    this.setCssFlags();\n\n    // remove unnecessary memory usage\n    // delete this.booleanFlagsValuePropertyName;\n    // delete this._values;\n    // delete this._cssFlags;\n    // delete this._cssFlagsPrefix;\n    // delete this.root;\n    // delete this.process;\n    // delete this.navigator;\n    // delete this.document;\n    // delete this.ua;\n\n    // console.warn('DetectorJS initialized', this.toFlags());\n  }\n\n  //! Feature\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkFeature() {\n    const feature = new Feature(this.ua);\n    const audio = new AudioFeature(this.ua);\n    const video = new VideoFeature(this.ua);\n\n    this.feature = feature.toFlags().merge({\n      audio: audio.toFlags(),\n      video: video.toFlags()\n    });\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(feature.toCssFlags(), audio.toCssFlags(), video.toCssFlags());\n    }\n  }\n\n  //! Software\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkEngine() {\n    const engine = new Engine(this.ua, this.toFlags());\n\n    if (this.#values) {\n      this.engine = engine.toValues();\n    } else {\n      this.engine = engine.toFlags();\n    }\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(engine.toCssFlags());\n    }\n  }\n\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkBrowser() {\n    const browser = new Browser(this.ua, this.toFlags());\n\n    if (this.#values) {\n      this.browser = browser.toValues();\n    } else {\n      this.browser = browser.toFlags();\n    }\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(browser.toCssFlags());\n    }\n  }\n\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkOS() {\n    const os = new OS(this.ua, this.toFlags());\n\n    if (this.#values) {\n      this.os = os.toValues();\n    } else {\n      this.os = os.toFlags();\n    }\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(os.toCssFlags());\n    }\n  }\n\n  //! Hardware\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkDevice() {\n    const device = new Device(this.ua, this.toFlags());\n\n    this.device = device.toFlags();\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(device.toCssFlags());\n    }\n  }\n\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkCPU() {\n    const cpu = new CPU(this.ua, this.toFlags());\n\n    if (this.#values) {\n      this.cpu = cpu.toValues();\n    } else {\n      this.cpu = cpu.toFlags();\n    }\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(cpu.toCssFlags());\n    }\n  }\n\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkGPU() {\n    const gpu = new GPU(this.ua, this.toFlags());\n\n    this.gpu = gpu.toFlags();\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(gpu.toCssFlags());\n    }\n  }\n\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  checkPlatform() {\n    const platform = new Platform(this.ua, this.toFlags());\n\n    if (this.#values) {\n      this.platform = platform.toValues();\n    } else {\n      this.platform = platform.toFlags();\n    }\n\n    if (!!this.#cssFlags) {\n      this.#cssFlags = this.#cssFlags.concat(platform.toCssFlags());\n    }\n  }\n\n  //! CSS Flags\n  /**\n   *\n   *\n   *\n   * @memberOf Detector\n   */\n  setCssFlags() {\n    if (!!this.#cssFlags) {\n      const cssFlagsPrefixed = this.#cssFlags.map((cssFlag) => {\n        return this.#cssFlagsPrefix + cssFlag;\n      });\n\n      const htmlElement = document.documentElement || document.querySelector('html');\n\n      cssFlagsPrefixed.forEach((cssFlag) => {\n        return htmlElement.className.replace(cssFlag, '');\n      });\n\n      htmlElement.className += cssFlagsPrefixed.join(' ').trim();\n    }\n  }\n}\n\nif (process.env.NODE_ENV === 'development') {\n  const packageJSON = require('../package.json');\n\n  console.log(`${packageJSON.description} v${packageJSON.version} initialized`);\n}\n"],"names":["$21f2e32e462c6512$export$e695250628cde35","$9eliX$detectorjscore","FlagsClass","values","cssFlags","cssFlagsPrefix","constructor","ua","super","this","checkFeature","checkEngine","checkBrowser","checkOS","checkCPU","checkGPU","checkPlatform","setCssFlags","feature","$9eliX$detectorjsfeature","Feature","audio","AudioFeature","video","VideoFeature","toFlags","merge","concat","toCssFlags","engine","$9eliX$detectorjssoftware","Engine","toValues","browser","Browser","os","OS","checkDevice","device","$9eliX$detectorjshardware","Device","cpu","CPU","gpu","GPU","platform","Platform","cssFlagsPrefixed","map","cssFlag","htmlElement","document","documentElement","querySelector","forEach","className","replace","join","trim"],"version":3,"file":"detector.js.map"}